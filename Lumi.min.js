var Lumi=function(){console.error("LumiJS: Lumi has no object to work with")};Lumi.canvas=document.createElement("CANVAS"),Lumi.canvas.id="canvas",document.body.appendChild(Lumi.canvas);const ctx=Lumi.canvas.getContext("2d");document.body.style.overflow="hidden",Lumi.canvasCheck={width:"normal",height:"normal"},Lumi.objects=[],Lumi.random=function(i,t){return Math.random()*(t-i)+i},Lumi.checkCollision=function(i,t){if("ellipse"!==i.type&&"ellipse"!==t.type)return i.x<t.x+t.width&&i.x+i.width>t.x&&i.y<t.y+t.height&&i.y+i.height>t.y},Lumi.rect=function(i,t,o,e,c){c||(c={restitution:0,collision:{collide:!0,affect:!0},color:"#000000"}),c.restitution||(c.restitution=0),c.collision||(c.collision={collide:!0,affect:!0}),c.collision.collide||(c.collision.collide=!0),c.collision.affect||(c.collision.affect=!0),c.color||(c.color="#000000"),this.type="rect",this.x=i,this.y=t,this.width=o,this.height=e,this.color=c.color,this.restitution=c.restitution,this.collision=c.collision,this.velocity={x:0,y:0},this.addXVel=function(i){this.velocity.x+=i},this.addYVel=function(i){this.velocity.y+=i},this.update=function(){this.x+=this.velocity.x,this.y+=this.velocity.y;for(var i=0;i<Lumi.objects.length;i++)this!=Lumi.objects[i]&&this.collision.collide&&Lumi.objects[i].collision.collide&&Lumi.checkCollision(this,Lumi.objects[i])&&this.collision.affect&&Lumi.resolveCollision(this,Lumi.objects[i])}},Lumi.ellipse=function(i,t,o,e){e||(e={restitution:0,collision:{collide:!0,affect:!0},color:"#000000"}),e.restitution||(e.restitution=0),e.collision||(e.collision={collide:!0,affect:!0}),e.collision.collide||(e.collision.collide=!0),e.collision.affect||(e.collison.affect=!0),e.color||(e.color="#000000"),this.type="ellipse",this.x=i,this.y=t,this.radius=o,this.color=e.color,this.restitution=e.restitution,this.collision=e.collision,this.velocity={x:0,y:0},this.addXVel=function(i){this.velocity.x+=i},this.addYVel=function(i){this.velocity.y+=i},this.update=function(){this.x+=this.velocity.x,this.y+=this.velocity.y;for(var i=0;i<Lumi.objects.length;i++)this!=Lumi.objects[i]&&this.collision.collide&&Lumi.objects[i].collision.collide&&Lumi.checkCollision(this,Lumi.objects[i])&&this.collision.affect&&Lumi.resolveCollision(this,Lumi.objects[i])}},Lumi.img=function(i,t,o,e,c,l){l||(l={restitution:0,collision:{collide:!0,affect:!0}}),l.restitution||(l.restitution=0),l.collision||(l.collision={collide:!0,affect:!0}),l.collision.collide||(l.collision.collide=!0),l.collision.affect||(l.collision.affect=!0),this.type="img",this.img=i,this.x=t,this.y=o,this.width=e,this.height=c,this.restitution=l.restitution,this.collision=l.collision,this.velocity={x:0,y:0},this.addXVel=function(i){this.velocity.x+=i},this.addYVel=function(i){this.velocity.y+=i},this.update=function(){this.x+=this.velocity.x,this.y+=this.velocity.y;for(var i=0;i<Lumi.objects.length;i++)this!=Lumi.objects[i]&&this.collision.collide&&Lumi.objects[i].collision.collide&&Lumi.checkCollision(this,Lumi.objects[i])&&this.collision.affect&&Lumi.resolveCollision(this,Lumi.objects[i])}},Lumi.addRect=function(i,t,o,e,c){return Lumi.objects.push(new Lumi.rect(i,t,o,e,c)),Lumi.objects[Lumi.objects.length-1]},Lumi.addEllipse=function(i,t,o,e){return Lumi.objects.push(new Lumi.ellipse(i,t,o,e)),Lumi.objects[Lumi.objects.length-1]},Lumi.addImg=function(i,t,o,e,c,l){return Lumi.objects.push(new Lumi.img(i,t,o,e,c,l)),Lumi.objects[Lumi.objects.length-1]},Lumi.resolveCollision=function(i,t){if(Lumi.checkCollision(i,t)||console.error("LumiJS: Obj1 and Obj2 aren't colliding."),i.velocity.x>0){for(;Lumi.checkCollision(i,t);)i.x--;i.addXVel(i.velocity.x*t.restitution*-1)}else if(i.velocity.x<0){for(;Lumi.checkCollision(i,t);)i.x++;i.addXVel(i.velocity.x*t.restitution)}if(i.velocity.y>0){for(;Lumi.checkCollision(i,t);)i.y--;i.addYVel(i.velocity.y*t.restitution*-1)}else if(i.velocity.y<0){for(;Lumi.checkCollision(i,t);)i.y++;i.addYVel(i.velocity.y*t.restitution)}},Lumi.config=function(i,t){i||(i=400),"fitToWindow"==i&&(i=window.innerWidth,Lumi.canvasCheck.width="fitToWindow"),t||(t=400),"fitToWindow"==t&&(t=window.innerHeight,Lumi.canvasCheck.height="fitToWindow"),Lumi.canvas.width=i,Lumi.canvas.height=t},Lumi.resize=function(){"fitToWindow"==Lumi.canvasCheck.width&&(Lumi.canvas.width=window.innerWidth),"fitToWindow"==Lumi.canvasCheck.height&&(Lumi.canvas.height=window.innerHeight)},window.onresize=Lumi.resize,Lumi.renderFrame=function(){scrollTo(10,10),ctx.clearRect(0,0,window.innerWidth,window.innerHeight);for(var i=0;i<Lumi.objects.length;i++)"rect"===Lumi.objects[i].type?(ctx.fillStyle=Lumi.objects[i].color,ctx.fillRect(Lumi.objects[i].x,Lumi.objects[i].y,Lumi.objects[i].width,Lumi.objects[i].height),Lumi.objects[i].update(),ctx.fillStyle="#000000"):"ellipse"===Lumi.objects[i].type?(ctx.beginPath(),ctx.arc(Lumi.objects[i].x,Lumi.objects[i].y,Lumi.objects[i].radius,0,2*Math.PI,!1),ctx.fillStyle=Lumi.objects[i].color,ctx.fill(),Lumi.objects[i].update(),ctx.fillStyle="#000000"):"img"===Lumi.objects[i].type&&(ctx.drawImage(Lumi.objects[i].img,Lumi.objects[i].x,Lumi.objects[i].y,Lumi.objects[i].width,Lumi.objects[i].height),Lumi.objects[i].update())},Lumi.init=function(){requestAnimationFrame(Lumi.init),Lumi.renderFrame()};